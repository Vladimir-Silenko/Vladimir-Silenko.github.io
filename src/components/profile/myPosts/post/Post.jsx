import dayjs from "dayjs";
import { useState } from "react";
import styled from "styled-components";
import { deletePostAC, postIsLikedAC } from "../../../../redux/profile-reducer";
import { Btn } from "../../../reusable/button";

const PostItem = styled.div`
display: flex;
padding: 10px;
margin-left: 10px;
height: 100px;
width: 550px;
background-color: rgb(229, 229, 229);
border-radius: 10px;
&& img {
    width:100px;
}
`
const PostMain = styled.div`
display:grid;
grid-template-rows:3fr 1fr;
width:100%;
padding:5px;
& span{
    font-size:14px;
}
& p{
    font-weight:500;
}
`
const Like = styled.span`
font-size:30px;
color:${props => props.liked ? 'red' : 'lightgrey'};
:hover{
    cursor:pointer;
}
`
const LikesCount = styled.span`
font-weight:bold;
color:darkblue;
`

let style = { display: 'flex', justifyContent: 'space-between' }
let Post = ({ message, time, likes, dispatch, id, isLiked, }) => {
    let [liked, setLike] = useState(isLiked)
    let [likesCount, setLikesCount] = useState(likes)
    const likePost = (itemId) => {
        liked ? setLike(false) : setLike(true)
        !liked ? setLikesCount(likesCount + 1) : setLikesCount(likesCount - 1)
        dispatch(postIsLikedAC(liked, itemId, likesCount))

    }

    const deleteMessage = (postId) => {
        dispatch(deletePostAC(postId))
    }
    return <PostItem>
        <img style={{ borderRadius: '10px' }} src='data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHCBYWFRgWFRUYGRgYHBkcHBgaGhgcGhkaHBgcGhocHB4cIS4lHB4rIRgaJjgmKy8xNTU1HCU7QDs0Py40NTEBDAwMEA8QHxISHjQrJCs0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDY0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NP/AABEIAOEA4QMBIgACEQEDEQH/xAAcAAEAAQUBAQAAAAAAAAAAAAAABgIDBAUHAQj/xABBEAACAQICBwUGBQIEBQUAAAABAgADEQQhBQYSMUFRYSJxgZGhEzKxwdHwB1JicuFCohYjgvEUM5PC4jRUc4OS/8QAGgEBAAMBAQEAAAAAAAAAAAAAAAECAwQFBv/EACgRAAICAgICAQQBBQAAAAAAAAABAhEDIRIxBEEiEzJRgWEFI0JScf/aAAwDAQACEQMRAD8A7NERAEREAREQBERAEREAREQBERAPJar4hEF3ZVHNiAPWanT+n0w6m1i/Betr7uM5JrDjMTijtVHvYmydoKF6Lln1lXJLRZRbOwf4kwn/ALill+oT1NYsKTYYimT+4TgSUnUjtDuNwLnkTKzUz7IsevyPHwkcmOJ3htZMMG2fbL38POanHa03v7CpQG/OoHOXA9k8fp1tyA13tdhtnmrL8s54mKRzY9luG1mD9Ytk8UdQw2u1RHC11punF6RNh1F2Ib08JL8BpWjW/wCXURjyDDaHeN84AKoQ2ZSpO5lJ2T4HKXDWcEPScqy5gg7NiOP6T1hNoOKPomJzXUr8QxUYYfFkLUyC1DkGPJuR6/7zpUsmVaPYiJJAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAJo9adPJg6BdiNs3CL+ZrfATcOwAJJsBmTyAnBdcNKvj8S5S5pp2UG4BR38Scz4DhKydExVmt0npyrWcsz775Dee4XvMSklW+0CyDfds/QCZlDQ5BzdR+kEk+NszMl6SAbIcA887/CZ2vRpTNU2MdjY9q3G2/l8plUsC4TbZczz5fdpmYDDAEi21kbHj4TGxu2pva67iPjJsnia9McFftBlz3g3HiDNtWoo4vlnuYe437hwPUTXY/CB0DoSQMuq9DKtD1iAUbcd333/OS/yitei57PIowy5HP74TB2mpsLMdnly+/rNjVbMqd819Vr3ElEMuVKAftpvAvYcDb4X8p1r8LdaTiKZw9Y/5tIZE73TcL8yMh3WnGsNiSjX+7WII9ZIcHiWw9aljaO5GG2o4razDxH3lF0R2fQ0SxhsQrorobqwDA8wRcS/LlRERAEREAREQBERAEREAREQBERAERKSbQCP6549aWHYFrbd18Ldr76ziVXGhzsJ2UHLK/ed83v4nawmrWNNDdU7PTr4ffHKKYNbbIHvHdz6uflyymMtuzaKpUbMo7dhARzC3Hmb5nvkt1e1RW21VuxPAnd6zP1b0IqICw5ZfXrJXTAAsBMXO9I2UEuzUf4fpgdlQJrsbq4rArlY3PnJWxllhIsk5tV1Zei20nbQizIeI+7yO4nC+yrBOBzQ/pPDw/wC0TsWISQPXTA7SbajtIdofP0z8JaM3dMiUFVojOlUIs33kPpbymrrNubn9/fhNtjn2qaPwYA+Vj82mkPFeX39J0ROeRRUHGb/VbE7V6Tbm5+Y8f5kfUy9gKxSorcmBiStEJ0zun4d4oik+GY3aiQVJ402uVz42YMPI8ZM5z3VHEj2ytzupP6WsV8Lqo/0zoUQdoiSpnsREuVEREAREQBERAEREAREQBERAPJGNdtNihQYA9ph5A5eu7z5SR1agVSxNgASTyAGc4trTj2rOXbJWJYDmNyX6ADIdb8ZScq0XhG9kLxF3dnc78z1JN5l6sJ7XEonM7R8Nw7prtI4gEG27cOp+c3X4bUycQzWLbCbhvJZt39spL7WzSL+SR2TD07ACZCiR7G6ZxFHN8IxTmjhiO8Ab/Se6N1yw1Vti7I+XZYW39Zgovs2ct0SBp4FlPtQd0q9oAM5AoxcTI5pKntXB4gzeY3H01HadR3kTRYnSNFt1RSeV+MU7Lpqjn9VbIyfkdh4E5ejzTPvB55H4fWbvSuTt+oDzHZmlqDI94PmLj1B850wZyTRYtn97/u0qYbjylFQ8efxEuJv75oVOgasaRK7BvmAoPiLjxBBPhyM7RRfaUEcQD5ifOOicQVC581PTip8bH0nddUsd7XDrnmuXh93mcdOvyTLas30RE1MxERAEREAREQBERAEREAREQDQ614i1IUwbGqdkniEGbkeGX+qca1jrF2Btk9yBw2QSo7gApHhOsazHbLhfeVVpr+6owv8A2/Cck12YJXdF3IAg/ai2v4kepmDdyNoqokWxIDE291Bl3c+8n4yb/h2PYYatiWBuxCi35Vub9O0xHhIJiHspX8xz7l/k/wBs7bqposJgqSEDNAxHV+0fjGV1GicauVkZpawYmpTevsM1NGVSQ6oCWYKFXaRiTdhmbCYVLE06zm6EMrEXOywNmK9molg/aUgXAvbK8mFfQQVWRFsr+8oJ2WzvmBlvmJgNWmBN7BDbaTOzWva+1c2z3SqlCutmjjPld6N1o1mKjI5ec1esGNYKVDFSchbfJGg2FJ6fASLOu3iAzC4G4d9xMKSZsraImuhlJZnJYLm7M6qqnjcm2fQHjM+jUwyDZVKTEb2Rkex62JIMkKYVaNTbaj7YblbK6Xv7qnIb94zPGQnHaGcOCVY7IAU7OybAFVvbcRx37p0Kmts55ck9IxdN+8CPzMPPMTTsb+IPpmPpNzpOmSGFswR6WmmOV+hv6yYvRWSLDjLuz8Pv4ShD9+P8y6u/xt4HfLWza45fSaGZtcC1weN7WH6lzt42t3kTqX4daRAsp4nYJ6kbSfB8+k5Fo+pnby6EZgycaq4kpWUXANTZS25dsEtTPdcW8+cpLRZbO3z2Y2BxAdFYcRmORGRHmDMmap2ZCIiSBERAEREAREQBERAEREAi+IN61zuD1HP/ANabC+s4xrIduqXPG5/uPyE7BpBtl3H6K3mXP8TlOsFIbXLL79Jyp/I6EviQrGnPuE+ksAgFNByVR6T5txnHuM+hcFjB7JST/SvwEnM6SJwq2zavsjfaY4dWPZN7eUjlfSDV39nTOQ99+A6DmZsyr00AprtZ5gmxtxI+kw5WdHGjLxidkiRb2oDkbrceEzNO6dKLa2fdIqulLgnZfaPMfS8jvovFUtnQ6FMOgvv5yxidHIBci/eSfiZqNXcZUWmNvy5DhN3icUGW95a1RSnZzfS1Ie1YW94v6ESJ4rsuR1I9bGTDTz2cN+sjzFz8JF9O09mo3I2PmB85rjZjkRgPPCb2PgZ45lvbsfjOhHOypHKtfkZM9HvtoGTeM+ocLcDnayjyPOQt+c3mrekPZuC3uNk3Q8G8JSa1aLRe6O9ataQFRTbLaVaoH77hwP2urjym9kG1QOyygHJWZemxVG3bL9aXH/yScy0HaKSVM9iIlyoiIgCIiAIiIAiIgCIlO1naAQzWZitRhzViOt1F/vvnN9Krtcf6T8LTr2tGjy6B1F3p52/Mu5h5EmchxBsRfdtWPg1vlOSUWpHVBpxIHi0+fynZtDv7bCUmBzamnnsgH1nJNIUirsDwLD78pOfw30qDTNBjmhLL1Rjf0J9RLZVyjZGJ8ZUSHB4gYZAGpuw/qZRexIJJPjebfA6do1kDo9wfDPdY8jkZmU6KlTcZHfLWicIuHLhFGw7BinJ+LLyvy53PGZQSa2dEn+DAx+FoVM2cgjopmCmGop/UCJMGoUW2S1IEDP3ARmM7kCR7SeCwvClftMcuzfI2BP5b23ZyXChGd6pmGcbTUWDL5iY9LGXbZVrg8OXUTQ1NXtttp32ATfZQk2zJsCbZZgbuEkuhtFU6KFlBsBvYkk+JlZRSXZa3fRFdYVNj0cfAj5yP6V7aI3HZ2T3qd/kRJPpwhi3WROo3vIe8d4/iXxsyyI1rDLwHwllxLrbrcryyxnSjkZcp55SqkSrdOI9JQL7II4S67buYGfedx+HlLA6R+G+OZ1bacAIA1ibMQhDgKeXZAz6852ifO+oRb21huscuBBRwQfEr5T6Fpe6vcPhKx02hPpMriexLlBERAEREAREQBERAKKm6W+dpfnloBaYTleuOh1WrVNIZdkkbtl9gMR0uCuf6jOs2kH1gxC02ripuesmzYfmw9NB6q58JllXxNMT+RyTTWG/zNq3vbD+eyreN2PpNdo7FtSdKi+8CDbOxHZDKed9o5m9suUk2smGsOqg+Rya3dkfGRB0sbd47gf8AeUxy5KmaTjTtHcdXtIrXpK6nJgD1F+B6zYOuU49+Hmn2w9Y0nJ9m39huBcdOfdO0KQc5nKPF0aQlyVmrdHG42mBicORmbk9fCScgchNZi9m8h6NYybNHhsMSbtkPu890zjgqBF4/CY2ltMKnZWRrE44kl2O+ZNl0n2e6VfLr/EiuLOdxNpj8XdFPO/z+k1WJzFxw+E1xprsyyO+jEY7WY38RMdjLxXPKUbRnVE5JHtJshfdmD9+Uu1FyU948j/5CYxFh4fO/ymah2qZ5qw8iD8wsllUT78MMKGrm4ysGHUb2HqZ28Ti/4avsFGt71l7irG5//Nx4zs67hKY+2Wn0iqIiamYiIgCIiAIiIAiIgCIiAJzX8UAabUqwzViqlSTskq+2Ljre3cDOlTn34r1kGG2W942ZOe2rpu/0sxlJ9F4dkM0hVV0QbyiJtH9yBiOuT7+h5SI4+jstb7y/i3lMnCY4oGJO/Zvvvv3Dz4yrEoDkOAuD04j75Tlb4yv0dKXKNGs0WLVweY9b5zqOitLuihGuQNx4gcuonMKKbNRT1/j5CdGwCBlHdJyytE4o0bl9OrbjNLpDTTNkuQmTWwnSa6vg7TmuTOpKKNRVZjnMGvTvNrUpHlNRpPE7GXE+nWaQjvRWcqWzWaVqWIQcBn0vMChiiuR92bClo937RB8ePXrMPSGEKb50x41Rxy5fceuFJ7MxyuWUtYdyDfgJnGnv7/rL/aUT5GFsbuo+ZmZoz+pTxFvIgn0BlqqM+m7y+zLlB88svrY7pZ7RRaZ0vURNl0VsgzIw7il7Dv2vWdknFdTUJqYcB7s4w7hSPdUM4YdbbDDutO1SuNU2TN9CIiamZ7ERAEREAREQBERAPIiUswAuchIbrsFNQmxAFz5DxnOvxFwyKntqp2namyBR7qNs7QIHC5Ugnr3Sa4nH77ZDnxP0nPteXFRDTU9snatvtx8L2v8A7zzsnn4+fBb/AJ9HVi8eUtnM9K1QzgqALm4t1sbHulzDVDs9VOXUZXmCyG9iMwLTKoqBe54HuzE3lTiTG1IuooLi3f8AT6eUnOiXuq2kR0BgDVLOP6AB0vvsfL1kswGHYHaUZHevXmOvxmMl6N49WSJEuJar4a8y8ILgS86SKHKiNYnBgAsTYDMmRTRmjf8AiKjVnHY2uyOnD5SYa0r/AJWwDbbYL57/AEvLuE0SBTRVZlsBmp5+EnlxRH3PZrDggBNDprACxJFhzMlz6IqndWb/AKaH1Mp/wsHzru78luAveQABfwnM/LhF9mjxtqjkNShYk2NuBtw4Hul+k91+986RpDVRNyKF3nMXvbhc8wJz/S2DNJ91lJ3cjOvD5cM2l2cssLx7MTY2gOpt6S5hEA2CdxYg+hnuGyYfuB9f5kjwGgC4PAI5N7XyBJa4/bn4TqboxonP4UYMOWqEf8pFQZEXYvUba7wGA8J1CR/U3RP/AA2GVSLM5LsDa67WYU23kCw77yQS8VSM5O2exPIliD2IiAIiIAiIgCInkApZrZzR4nGbZNvdG7r1lOlseSCFOV9kdSd5mGLKJ4Hn+b9T+3Dr2zuwYKXKXfos6QxOyuW/gPnNdo3Rm0S7Zk3mdTo7bXO6bKnTsOk8v+Ed0pKEeK7IwupeG2izBmJJNicr+ErbVTDs1ygsD7o424E77dBaSRs5SVtLPNk/2ZimRvA6FXDrUQKLPUdwRuAa1l6WAAmQ1NFFlzm5MttSX8o8hOzH57SqS/ZHE1yVbZAZy4m0eHnM1afIAT0IIn57/wAUTxj7NLpXRhrIADmrKwy5H6ZeM2lKhsgDcBlaZNotOWeec+2WTS6RaCiGMrInlhMrLWYzpcHK8jGm9XFqqRaxvdTy4iS7aN99oSndRfgSPOdXi3ytPZTI/js4vjsAuGASt2WLsCdk2sLZg8R2lbK/vDnO1am6GWnT2yQ22doGxFr7z13+k1mseqCY4UQx2Wpve/5kaxde/sj1k5w9EIoVRYKABPo8b5pM8yetF6IibmYiIgCIiAIiIAiIgFNprtLYvYAUb2v5AZ/KbBjYXPCRbStYs6twFx4H+bTg8/P9PFSe2dHj4+ct9IsYy9lA/Mv8yortG3CVgevwmTSp2nzaPRcuKPaVOwlTtDNKJEnWkZdu2eiekzyJUk8MpOU9ZrSi0EpA5z0Ce2npgk8lpnmDjNKKp2VBZjuVcz3nkOs9oJVbNm2f0rY+ZlqLqLStmX7SA8pCczfvtKGEgmkXC3OYmHrMud73INjuEuVGy9Ji1KlpaMnF2ieKrZI9GYxainZyZGII5EfUWPjN2puJz/B1zSf2q3/Wv5l4+I3j+ZPKRBFxmDmDzvPpPBy84nl+RDiy9ERO85xERAEREAREQBES3UqBVLHcBcwDXaZxWyoUZk5+H38JowwfLhxlGLxJdix48OQ4CZmGobIuRmd/0ni/1CEZvl76/R34PhGiqlT4nwlbNDvKbzyJNJcYm3e2IiCZkSJSzcp4WgCBQAnjPaUVKtt0wMbiCq34sQo8TLJF1Fs2AqZX4TXV3qVjs0zsruNS1z1Cg7z1OQ67pkpS2wAfdG/9R5d0yLgZC1hw5QnTGk9dmPhMElMWVczvY5sx5sTmZeJnhaUM0d9k032VM0tM88d5jVKsgukKrzBrVIrVpgV68lbJZlYav2j3Sd6utfD0+gK+CsVA8ABOb4Vr3M6Hqsf8gd7W8/ree3/TU0/0cHl7Ru4iJ7JwCIiAIiIAiIgHkj2sWO3U1PVvkPn5TbaSxgpIXPDcOZ4CQnDhqrkseN2bv+cwzT4o2xQt2zNwFLaO0fdHqZsHqXlguAABkBwgGfP+Tnc5UujvjGlbLt57KAYLTl4lqK7ygtKGqSjblGiVEu7Us1KstvUlsvFF4xKjnMCvRarVQDJU7R/7QOuXpKq+MAOyN/E/KZuAWy3O9s/DhJsu9KzJtbL0lBMpZ5aapKlVErZpbZ5ZapLD1JNl6LrvMGtWnlatwmBWrwlYsqr1Zrq9aeYivMLbuZ0QxmcpG2pVNlOpnQtS6hOHUHgCfE1H+QE5kz+nqTuE6fqdTtQB/MTbqqgID4lSfGer4Sf1P0cPkP4khiInrnEIiIAiIgCIiARrXL3U72+Amq0V7h/d8hETh8rpnXh6MiXFiJ88+zu9FayhoiH0EWjKDETMuijjKDEQXRrMXvPfN+PdHcPhEQRP0WKksPxiJDJRYqTHP1+M9iQDBrfX4zAr7oiaYyrNfXlinviJ2R6MZGanvp+9fiJ1vVT/ANHQ/YsRPS8L73/w4/I+1G4iInpnIIiIB//Z' />
        <PostMain>
            <p>{message}</p>
            <span style={style}>
                <div> <Like liked={liked} onClick={() => likePost(id)}>â™¥</Like><LikesCount> {likesCount}</LikesCount> people liked this</div>
                <span>{dayjs(time).format('D.MMM HH:mm')}</span>
                <Btn id={id} onClick={(e) => deleteMessage(e.target.id)} style={{ margin: '0' }}>Delete</Btn>
            </span>
        </PostMain>
    </PostItem>


}
export default Post;
